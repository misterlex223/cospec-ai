# 目錄描述文件規格

## 目錄描述文件

目錄描述文件是一種特殊的 Markdown 文件，用於提供目錄的可讀名稱和描述信息，使專案結構更加清晰易懂。

### 文件格式

- **文件類型**：Markdown (.md)
- **文件名稱**：`.directory-info.md`（以點開頭的隱藏文件）
- **位置**：放置在需要描述的目錄中

### 內容結構

目錄描述文件應包含以下內容：

```markdown
# 目錄描述

## 目錄映射
| 實際目錄名 | 顯示名稱 |
|-----------|---------|
| src       | 源代碼  |
| docs      | 文檔    |
| tests     | 測試    |

## 目錄描述
| 實際目錄名 | 描述 |
|-----------|------|
| src       | 包含應用源代碼文件 |
| docs      | 包含項目文檔和說明 |
| tests     | 包含單元測試和集成測試 |
```

### 數據結構

1. **目錄映射表**：
   - **實際目錄名**：文件系統中的實際目錄名稱
   - **顯示名稱**：在用戶界面中顯示的人類可讀名稱

2. **目錄描述表**：
   - **實際目錄名**：文件系統中的實際目錄名稱
   - **描述**：對該目錄內容和用途的簡短描述

### 使用場景

1. **目錄瀏覽**：
   - 在文件列表頁面中，使用顯示名稱替代實際目錄名
   - 在懸停提示中顯示目錄描述

2. **目錄導航**：
   - 在麵包屑導航中使用顯示名稱
   - 在目錄樹中使用顯示名稱

3. **搜索功能**：
   - 將目錄描述納入搜索範圍
   - 允許通過顯示名稱搜索目錄

### 編輯功能

1. **創建描述文件**：
   - 在文件列表頁面提供「創建描述文件」按鈕
   - 自動生成包含當前目錄所有子目錄的模板

2. **編輯描述文件**：
   - 提供專用的編輯界面，以表格形式編輯
   - 自動檢測新增的目錄並添加到表格中
   - 保留用戶已編輯的顯示名稱和描述

3. **預覽功能**：
   - 在編輯時提供即時預覽
   - 顯示編輯後的目錄結構效果

### 系統行為

1. **文件讀取**：
   - 系統在加載目錄時自動查找並讀取 `.directory-info.md` 文件
   - 解析文件內容並提取映射和描述信息

2. **缺失處理**：
   - 當描述文件不存在時，使用實際目錄名作為顯示名稱
   - 提供創建描述文件的選項

3. **錯誤處理**：
   - 當描述文件格式錯誤時，顯示警告並使用實際目錄名
   - 提供修復描述文件的選項

### 安全考慮

1. **文件權限**：
   - 描述文件的編輯應遵循與其他文件相同的權限控制
   - 只有具有寫入權限的用戶才能編輯描述文件

2. **內容驗證**：
   - 驗證描述文件內容，防止注入惡意代碼
   - 限制描述文件的大小，避免性能問題

### 實現注意事項

1. **性能考慮**：
   - 緩存描述文件內容，避免頻繁讀取
   - 當目錄結構變化時更新緩存

2. **用戶體驗**：
   - 提供直觀的編輯界面
   - 自動保存編輯內容
   - 提供撤銷和重做功能

3. **版本控制**：
   - 描述文件應納入版本控制系統
   - 在 Git 操作中包含描述文件的變更
