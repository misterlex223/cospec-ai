# 文件列表頁面 UX 規格（更新版）

## 文件列表頁面

設計一個功能完整的文件列表頁面，讓用戶能夠查看、創建、管理和組織專案中的 Markdown 文件和目錄。

### 視覺設計

- **佈局**：頂部導航欄，麵包屑導航，主要內容區域採用表格布局
- **配色**：使用應用的主色調（藍色系）和中性色調（白色、淺灰色背景）
- **字體**：使用清晰易讀的無襯線字體，標題粗體，內容常規字重
- **表格設計**：清晰的行分隔，懸停高亮效果
- **響應式**：在小屏幕上將表格轉換為卡片列表視圖

### 內容元素

1. **頁面頂部欄**：
   - 左側：應用 Logo 和名稱「CoSpec Markdown」
   - 右側：用戶信息區域（用戶名、頭像）和登出按鈕

2. **麵包屑導航**：
   - 「個人空間」 > 「專案」 > 「[專案名稱]」
   - 可點擊返回上級頁面

3. **頁面標題區域**：
   - 專案名稱：大標題，顯示當前專案名稱
   - 返回按鈕：「← 返回到專案列表」

4. **功能區域**：分為三列布局

   **左列 - 文件操作**：
   - 標題：「創建新文件」
   - 輸入框：「文件名稱（例如：document.md）」
   - 創建按鈕：「創建」
   - 加載狀態：顯示「創建中...」
   - 錯誤消息區域：顯示創建失敗的錯誤信息

   **中列 - 目錄操作**：
   - 標題：「創建新目錄」
   - 輸入框：「目錄名稱」
   - 創建按鈕：「創建」
   - 加載狀態：顯示「創建中...」
   - 錯誤消息區域：顯示創建失敗的錯誤信息

   **右列 - GitHub 集成**（如果已連接）：
   - 標題：「GitHub 集成」
   - 顯示連接信息：「已連接到：[倉庫名]:[分支名]」
   - 操作按鈕：
     - 「拉取」按鈕：從 GitHub 拉取更改
     - 「推送」按鈕：打開推送對話框

5. **目錄導航區域**：
   - 當前路徑顯示：顯示當前在專案中的相對路徑
   - 上級目錄按鈕：「..」，允許導航到上級目錄
   - 路徑麵包屑：顯示當前路徑的各級目錄，可點擊導航

6. **文件和目錄表格**：
   - 表頭：
     - 複選框列（如果已連接 GitHub）
     - 類型列（文件/目錄圖標）
     - 名稱列
     - 顯示名稱列（來自目錄描述文件）
     - 大小列
     - 狀態列（如果已連接 GitHub）
     - 更新時間列
   - 表格行（目錄）：
     - 複選框：用於選擇要推送的目錄
     - 類型圖標：顯示目錄圖標
     - 目錄名：顯示目錄名，可點擊
     - 顯示名稱：顯示從目錄描述文件中獲取的可讀名稱
     - 大小：顯示「-」或項目數量
     - Git 狀態：顯示「已同步」、「已修改」或「新建」狀態
     - 更新時間：顯示最後修改時間
   - 表格行（文件）：
     - 複選框：用於選擇要推送的文件
     - 類型圖標：顯示文件圖標
     - 文件名：顯示文件名，可點擊
     - 顯示名稱：顯示「-」（文件沒有顯示名稱）
     - 文件大小：以字節為單位
     - Git 狀態：顯示「已同步」、「已修改」或「新建」狀態
     - 更新時間：顯示最後修改時間

7. **目錄描述文件管理區域**：
   - 標題：「目錄描述」
   - 當前目錄的描述信息（如果有）
   - 編輯按鈕：打開目錄描述編輯對話框
   - 創建按鈕（如果不存在）：「創建描述文件」

8. **空狀態提示**：
   - 當沒有文件和目錄時顯示
   - 文本：「此目錄為空。創建一個新文件或目錄開始使用。」
   - 視覺元素：適當的空狀態插圖

9. **加載狀態**：
   - 在數據加載過程中顯示
   - 動畫：旋轉加載指示器
   - 文本：「正在加載文件...」

10. **推送對話框**（彈出式）：
    - 標題：「推送到 GitHub」
    - 提交信息輸入區：「提交信息」多行文本框
    - 選中文件列表：顯示已選擇的文件和目錄
    - 按鈕：
      - 「取消」按鈕：關閉對話框
      - 「推送」按鈕：確認推送操作

11. **目錄描述編輯對話框**（彈出式）：
    - 標題：「編輯目錄描述」
    - 表格編輯器：
      - 實際目錄名列（只讀）
      - 顯示名稱列（可編輯）
      - 描述列（可編輯）
    - 按鈕：
      - 「取消」按鈕：關閉對話框
      - 「保存」按鈕：保存描述文件

### 交互設計

1. **創建文件**：
   - 輸入文件名稱後啟用創建按鈕
   - 點擊創建按鈕提交表單
   - 顯示加載狀態
   - 成功後將新文件添加到列表中並導航至編輯器頁面
   - 失敗時顯示錯誤信息

2. **創建目錄**：
   - 輸入目錄名稱後啟用創建按鈕
   - 點擊創建按鈕提交表單
   - 顯示加載狀態
   - 成功後將新目錄添加到列表中
   - 失敗時顯示錯誤信息

3. **文件表格交互**：
   - 點擊文件名：導航至該文件的編輯器頁面
   - 點擊目錄名：導航至該目錄
   - 勾選複選框：將文件/目錄添加到推送選擇列表
   - 表頭複選框：選擇/取消選擇所有文件和目錄
   - 行懸停效果：背景色變化

4. **目錄導航交互**：
   - 點擊上級目錄按鈕：導航至上級目錄
   - 點擊路徑麵包屑：導航至對應目錄

5. **目錄描述文件交互**：
   - 點擊編輯按鈕：打開目錄描述編輯對話框
   - 點擊創建按鈕：創建新的描述文件並打開編輯對話框
   - 編輯對話框中：
     - 編輯顯示名稱和描述
     - 點擊保存按鈕：保存更改並更新顯示
     - 點擊取消按鈕：放棄更改並關閉對話框

6. **GitHub 操作交互**：
   - 拉取操作：
     - 點擊拉取按鈕從 GitHub 拉取最新更改
     - 顯示加載狀態
     - 成功後更新文件列表和狀態
     - 失敗時顯示錯誤信息
   - 推送操作：
     - 點擊推送按鈕打開推送對話框
     - 輸入提交信息
     - 查看選中的文件列表
     - 點擊確認按鈕推送到 GitHub
     - 顯示加載狀態
     - 成功後更新文件狀態
     - 失敗時顯示錯誤信息

7. **麵包屑導航**：
   - 點擊「個人空間」返回個人空間頁面
   - 點擊「專案」返回專案列表頁面
   - 點擊專案名稱返回專案根目錄

8. **響應式行為**：
   - 小屏幕：將表格轉換為卡片列表視圖
   - 功能區域從並排變為堆疊

### 狀態和錯誤處理

1. **加載狀態**：
   - 初始加載：顯示加載指示器
   - 部分加載：顯示已加載的文件，同時加載更多

2. **錯誤狀態**：
   - 網絡錯誤：顯示「無法連接到服務器」消息和重試按鈕
   - 認證錯誤：重定向至登入頁面
   - 權限錯誤：顯示「無權訪問此專案」消息

3. **創建文件錯誤**：
   - 名稱已存在：「文件名稱已被使用」
   - 名稱無效：「文件名稱包含無效字符」
   - 服務器錯誤：「創建文件失敗，請稍後再試」

4. **創建目錄錯誤**：
   - 名稱已存在：「目錄名稱已被使用」
   - 名稱無效：「目錄名稱包含無效字符」
   - 服務器錯誤：「創建目錄失敗，請稍後再試」

5. **目錄描述文件錯誤**：
   - 保存失敗：「保存描述文件失敗」
   - 格式錯誤：「描述文件格式無效」

6. **GitHub 操作錯誤**：
   - 拉取錯誤：「從 GitHub 拉取更改失敗」，顯示具體錯誤原因
   - 推送錯誤：「推送到 GitHub 失敗」，顯示具體錯誤原因
   - 衝突錯誤：「存在衝突文件，請解決衝突後再推送」

### 輔助功能

1. **鍵盤導航**：
   - 支持 Tab 鍵在各元素間導航
   - 支持 Enter 鍵激活按鈕和表格行
   - 支持空格鍵切換複選框

2. **屏幕閱讀器支持**：
   - 為所有交互元素提供適當的 ARIA 標籤
   - 確保動態內容變化時發出適當的通知
   - 表格包含適當的表頭和單元格關聯

3. **高對比度模式**：
   - 確保在高對比度模式下所有元素仍然清晰可見
   - 避免僅依靠顏色傳達信息
