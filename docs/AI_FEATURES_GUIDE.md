# CoSpec AI Markdown 編輯器 - AI 功能使用說明

## 功能簡介

CoSpec AI Markdown 編輯器整合了 AI 功能，讓您可以在編輯 Markdown 文件時直接與 AI 互動，獲得智能輔助。AI 助理提供即時反饋，並在處理過程中顯示加載指示器以提供視覺回饋。

## 如何使用

### 1. 開啟 AI 助理
- 在編輯器右下角點擊 🤖 按鈕即可開啟 AI 助理面板
- 再次點擊 ✕ 按鈕可關閉面板

### 2. 與 AI 互動
AI 助理提供兩種互動方式：

#### A. 快速功能按鈕
首次開啟面板時，您會看到四個快速功能按鈕：
- **總結文件**：生成當前文件內容的摘要
- **重寫優化**：改進文件的文字表達和結構
- **格式化**：規範 Markdown 格式
- **解釋內容**：詳細解釋文件內容

#### B. 自由對話
- 在底部輸入框中輸入您的問題或要求
- 點擊"發送"按鈕與 AI 對話
- 例如：「請優化這段文字」、「解釋這段內容的意思」、「將這段內容改寫得更專業」

### 3. 加載指示器

當 AI 處理請求時，您會在以下位置看到加載指示器：
- AI 助理面板開關按鈕：會顯示旋轉的加載動畫
- 快速功能按鈕：按鈕上會顯示加載動畫直到操作完成
- 輸入框：右側會顯示加載指示器
- 發送按鈕：會顯示加載動畫直到回應完成

這些視覺回饋讓您清楚知道 AI 正在處理您的請求。

### 4. AI 輸出處理
- AI 生成的回應會顯示在對話面板中
- 如果 AI 生成了新的文件內容，系統會自動更新編輯器中的內容
- 您也可以選擇忽略 AI 的建議，手動調整內容

## 使用範例

1. **內容優化**：選取文字後，在 AI 助理中輸入"請優化這段文字的表達"
2. **文件總結**：點擊「總結文件」按鈕，快速了解文件要點
3. **格式調整**：點擊「格式化」按鈕，自動規範 Markdown 語法
4. **問題解答**：輸入"這份文件的主要內容是什麼？"，獲得 AI 解讀

## 注意事項

- 首次使用需要配置 OpenAI API 金鑰（詳見環境變數配置）
- 在沒有配置 API 金鑰的情況下，系統會使用模擬回應進行演示
- AI 生成的內容僅供參考，建議進行適當的審核和調整
- 避免在文件中處理敏感或機密資訊

## 環境變數配置

如需使用實際的 AI 功能，請在運行環境中設置以下環境變數：

### 基本配置
- `OPENAI_API_KEY`: OpenAI API 金鑰

### 進階配置（可選）
- `OPENAI_BASE_URL`: 自定義 OpenAI API 端點（預設為 OpenAI 官方端點）
- `OPENAI_MODEL`: 自定義 AI 模型名稱（預設為 gpt-3.5-turbo）
- `AI_SYSTEM_PROMPT`: 自定義系統提示詞（預設為 "You are a helpful assistant that responds in Markdown format."）

## 技術實現

### 前端實現
- React 組件實現對話界面
- ReactMarkdown 組件用於渲染 AI 回應中的 Markdown 內容
- CSS 動畫實現加載指示器（旋轉動畫）
- 加載狀態管理在按鈕、輸入框和發送按鈕中提供視覺回饋

### 後端實現
- Node.js API 介面，整合 OpenAI API
- 支援自定義 API 端點、模型名稱和系統提示詞
- 環境變數配置用於 AI 服務參數調整

### 通訊機制
- 通過 HTTP API 調用實現前後端交互
- 環境變數傳遞實現配置參數的動態調整